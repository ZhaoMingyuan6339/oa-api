import{d as e,r as a,ac as t,c as n,f as l,M as s,l as o,q as r,t as i,A as c,k as u,x as d,V as m,U as v,a4 as g,a5 as D,B as f}from"./ant-design-vue.5cd75ca8.js";import{H as Y,r as h}from"./index.2c6e8c15.js";import{c as k}from"./index.04df7211.js";import{u as y}from"./useI18n.94ac6758.js";const{t:x}=y();var p=e({setup(){const e=a(t()),r=a(""),i=a(),c=a("month"),u=a(!1),d=a([]),m=()=>{u.value=!0},v=()=>{(function(e={}){return Y("/admin/baseInfo/workingDaySettings","GET",e)})({day:t(e.value).format("YYYY-MM-DD")}).then((e=>{d.value=e.data.rows}))},g=n((()=>d.value.length));return l((()=>{v()})),{t:x,dateTime:e,visible:u,remark:r,selectDates:g,handleCreate:()=>{const a={dateTime:t(e.value).format("YYYY-MM-DD"),dateLists:d.value};k(a).then((e=>{s.success(e.message),h.push({name:"Salary"})}))},getListData:e=>d.value.filter((a=>a.day===e.format("YYYY-MM-DD"))).length?d.value.filter((a=>a.day===e.format("YYYY-MM-DD")))[0]:"",handleSelect:e=>{"month"===c.value&&(i.value=e,0===d.value.filter((a=>a.day===e.format("YYYY-MM-DD"))).length?m():o.confirm({title:x("routes.workingDaySetting.calcelText"),okText:x("common.okText"),cancelText:x("common.cancelText"),onOk:()=>{const a=d.value.filter((a=>a.day===e.format("YYYY-MM-DD")))[0].id;var t;(t=a,Y("/admin/baseInfo/workingDaySettings/"+t,"DELETE")).then((e=>{s.success(e.message),v()}))}}))},showModal:m,handleCancel:()=>{r.value="",u.value=!1},handleSubmit:async()=>{u.value=!1,await function(e={}){return Y("/admin/baseInfo/workingDaySettings","POST",e)}({day:t(i.value).format("YYYY-MM-DD"),remark:r.value}),r.value="",await v()},confirm:confirm,handlePanelChange:(e,a)=>{c.value=a,v()}}}});const M={class:"p-4"},S={class:"pl-2 pr-2"};p.render=function(e,a,t,n,l,s){const o=r("a-button"),Y=r("a-badge"),h=r("a-calendar"),k=r("a-textarea"),y=r("a-modal");return i(),c("div",M,[u(o,{type:"primary",onClick:e.handleCreate},{default:d((()=>[m(v(e.t("routes.workingDaySetting.generateCurrentMonthData"))+" ( "+v(e.selectDates)+" "+v(e.t("routes.workingDaySetting.day"))+" ) ",1)])),_:1},8,["onClick"]),u(h,{value:e.dateTime,"onUpdate:value":a[0]||(a[0]=a=>e.dateTime=a),onSelect:e.handleSelect,onPanelChange:e.handlePanelChange},{dateCellRender:d((({current:a})=>[g(f("div",S,[u(Y,{status:"success",text:e.getListData(a).remark},null,8,["text"])],512),[[D,e.getListData(a)]])])),_:1},8,["value","onSelect","onPanelChange"]),u(y,{visible:e.visible,"onUpdate:visible":a[2]||(a[2]=a=>e.visible=a),title:e.t("routes.workingDaySetting.setDay"),"ok-text":e.t("common.okText"),"cancel-text":e.t("common.cancelText"),onCancel:e.handleCancel,onOk:e.handleSubmit},{default:d((()=>[u(k,{value:e.remark,"onUpdate:value":a[1]||(a[1]=a=>e.remark=a),placeholder:e.t("routes.workingDaySetting.remark"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["visible","title","ok-text","cancel-text","onCancel","onOk"])])};export{p as default};
