var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{g as d,l as r}from"./index.9d115300.js";import{g as i,s as c,l as u,u as p,a as m,d as f,b as v}from"./dictFormat.fa6d45c4.js";import{a as g,b}from"./index.e0281189.js";import{u as h}from"./useDrawer.60140d94.js";import{_ as y}from"./index.d425032d.js";import{d as S,c as w,r as C,a as _,f as k,a6 as T,n as L,M as R,l as x,a3 as O,m as j,A as U,B as F,v as K,t as V,a4 as z,V as D,q as N,H as I,U as P}from"./ant-design-vue.8fffeee5.js";const q=[{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",align:"center"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",align:"center"},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",align:"center"},{title:"状态",dataIndex:"status",key:"status",align:"center",slots:{customRender:"status"}},{title:"备注",dataIndex:"remark",key:"remark",align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",align:"center"},{title:"操作",key:"action",align:"center",slots:{customRender:"action"}}];var A=S({components:{FormSearch:y},setup(){const e=w((()=>g().loading)),y=b(),S=C(),x=C([]),O=C([]),j=_([{type:"select",label:"字典类型",name:"dictType",value:void 0,placeholder:"请选择字典类型",normalizer:{value:"dictType",label:"dictName"},options:S},{type:"input",label:"字典标签",name:"dictLabel",value:"",placeholder:"请输入字典标签"},{type:"select",label:"状态",name:"status",value:void 0,placeholder:"请选择数据状态",normalizer:{value:"dictValue",label:"dictLabel"},options:O}]),U=_({pageNum:1,pageSize:10,dictLabel:"",dictType:"",status:""}),F=C([]),K=C({total:0,current:1,pageSize:10,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`}),V=_({selectedRowKeys:[]}),z=w((()=>V.selectedRowKeys.length>0)),D=e=>{u(e).then((e=>{console.log(e),F.value=e.data.rows,K.value.total=e.data.count,V.selectedRowKeys=[]}))},N=C(),I=_({id:void 0,dictType:"",dictLabel:"",dictValue:"",dictSort:1,status:"1",remark:""}),{open:P,drawerTitle:A}=h();console.log(P);return k((async()=>{console.log(U),O.value=await i("sys_normal_disable"),x.value=await i("sys_normal_disable"),x.value.forEach((e=>{e.label=e.dictLabel,e.value=e.dictValue})),console.log(O),d(y.params.id).then((e=>{U.dictType=e.data.dictType,j[0].value=e.data.dictType,console.log(U),D(U)})),r().then((e=>{S.value=e.data.rows}))})),E=((e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&n(e,t,a[t]);return e})({loading:e,queryParams:U,formFields:j,handleQuery:e=>{K.value.current=1,U.pageNum=K.value.current,U.dictType=e.dictType,U.dictLabel=e.dictLabel,U.status=e.status,D(U)},handleReset:e=>{j[0].value=void 0,L((()=>{U.dictLabel=e.dictLabel,U.status=e.status,j[0].value=U.dictType,D(U)}))},dataList:F,columns:q,pagination:K,handleTableChange:e=>{K.value=e,U.pageNum=K.value.current,U.pageSize=K.value.pageSize,D(U)},selectDictLabel:c,statusOptions:O},T(V)),a(E,t({hasSelected:z,onSelectChange:e=>{console.log("selectedRowKeys changed: ",e),V.selectedRowKeys=e},typeOptions:S,open:P,drawerTitle:A,formState:I,labelCol:{span:6},wrapperCol:{span:18},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictLabel:[{required:!0,message:"字典类型不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}]},formRef:N,handleClose:()=>{I.id=void 0,N.value.resetFields(),console.log(N),P.value=!1},handleSubmit:()=>{console.log(I),N.value.validate().then((()=>{I.id?p(I).then((e=>{R.success(e.message),I.id=void 0,N.value.resetFields(),P.value=!1,D(U)})):m(I).then((e=>{R.success(e.message),I.id=void 0,N.value.resetFields(),P.value=!1,D(U)}))})).catch((e=>{console.log("error",e)}))},confirm:e=>{const a=e.id||V.selectedRowKeys;f(a).then((()=>{(a.length&&a.length===F.value.length||1===F.value.length)&&Math.ceil(K.value.total/U.pageSize)===U.pageNum&&U.pageNum>1&&U.pageNum--,D(U),R.success("删除成功")}))},cancel:e=>{console.log(e),R.success("取消删除")},handleAdd:()=>{P.value=!0,A.value="添加字典",I.dictType=U.dictType},handleUpdate:e=>{v(e.id).then((e=>{P.value=!0,I.dictType=U.dictType,A.value="修改字典",L((()=>{Object.keys(I).forEach((a=>{I[a]=e.data[a]}))}))}))},disableOptions:x}));var E}});const E={class:"p-4"},M={class:"mb-3"},Q=P("新增"),B=P(" 删除 "),H=P(" 修改 "),$=P(" 删除 "),G=P(" 确认 "),J=P("取消");A.render=function(e,a,t,l,o,s){const n=x("form-search"),d=x("a-button"),r=x("a-col"),i=x("a-popconfirm"),c=x("a-row"),u=x("a-table"),p=x("a-input"),m=x("a-form-item"),f=x("a-input-number"),v=x("a-radio-group"),g=x("a-textarea"),b=x("a-form"),h=x("a-drawer"),y=O("has-permi");return j(),U("div",E,[F("div",M,[K(n,{formFields:e.formFields,onSearch:e.handleQuery,onReset:e.handleReset},null,8,["formFields","onSearch","onReset"])]),K(c,{gutter:10,class:"mb-2"},{default:V((()=>[z(K(r,null,{default:V((()=>[K(d,{color:"success",onClick:e.handleAdd},{default:V((()=>[Q])),_:1},8,["onClick"])])),_:1},512),[[y,["system:dictData:add"]]]),z(K(r,null,{default:V((()=>[K(i,{title:"确定要删除选中数据吗？","ok-text":"确定","cancel-text":"取消",onConfirm:e.confirm,onCancel:e.cancel},{default:V((()=>[K(d,{disabled:!e.hasSelected,color:"error"},{default:V((()=>[B])),_:1},8,["disabled"])])),_:1},8,["onConfirm","onCancel"])])),_:1},512),[[y,["system:dictData:delete"]]])])),_:1}),K(u,{loading:e.loading,rowKey:"id","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"data-source":e.dataList,pagination:e.pagination,onChange:e.handleTableChange},{status:V((({record:a})=>[F("span",null,D(e.selectDictLabel(e.statusOptions,a.status)),1)])),action:V((({record:a})=>[F("span",null,[z(K(d,{type:"link",color:"success",class:"mr-3",onClick:t=>e.handleUpdate(a)},{default:V((()=>[H])),_:2},1032,["onClick"]),[[y,["system:dictData:update"]]]),K(i,{title:"确定要删除该数据吗？","ok-text":"确定","cancel-text":"取消",onConfirm:t=>e.confirm(a),onCancel:e.cancel},{default:V((()=>[z(K(d,{type:"link",color:"error"},{default:V((()=>[$])),_:1},512),[[y,["system:dictData:delete"]]])])),_:2},1032,["onConfirm","onCancel"])])])),_:1},8,["loading","row-selection","columns","data-source","pagination","onChange"]),K(h,{width:"50%",title:e.drawerTitle,placement:"right",visible:e.open,"onUpdate:visible":a[6]||(a[6]=a=>e.open=a),maskClosable:!1,onClose:e.handleClose},{default:V((()=>[e.open?(j(),N(b,{key:0,ref:"formRef",model:e.formState,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:V((()=>[K(c,null,{default:V((()=>[K(r,{span:12},{default:V((()=>[K(m,{label:"字典类型",name:"dictType"},{default:V((()=>[K(p,{disabled:"",value:e.formState.dictType,"onUpdate:value":a[0]||(a[0]=a=>e.formState.dictType=a),placeholder:"请输入字典类型"},null,8,["value"])])),_:1})])),_:1}),K(r,{span:12},{default:V((()=>[K(m,{label:"字典标签",name:"dictLabel"},{default:V((()=>[K(p,{value:e.formState.dictLabel,"onUpdate:value":a[1]||(a[1]=a=>e.formState.dictLabel=a),placeholder:"请输入字典标签"},null,8,["value"])])),_:1})])),_:1}),K(r,{span:12},{default:V((()=>[K(m,{label:"字典键值",name:"dictValue"},{default:V((()=>[K(p,{value:e.formState.dictValue,"onUpdate:value":a[2]||(a[2]=a=>e.formState.dictValue=a),placeholder:"请输入字典键值"},null,8,["value"])])),_:1})])),_:1}),K(r,{span:12},{default:V((()=>[K(m,{label:"显示排序",name:"dictSort"},{default:V((()=>[K(f,{class:"!w-[100%]",value:e.formState.dictSort,"onUpdate:value":a[3]||(a[3]=a=>e.formState.dictSort=a),placeholder:"请输入显示排序"},null,8,["value"])])),_:1})])),_:1}),K(r,{span:12},{default:V((()=>[K(m,{label:"状态",name:"status"},{default:V((()=>[K(v,{value:e.formState.status,"onUpdate:value":a[4]||(a[4]=a=>e.formState.status=a),options:e.disableOptions},null,8,["value","options"])])),_:1})])),_:1}),K(r,{span:12},{default:V((()=>[K(m,{label:"备注",name:"remark"},{default:V((()=>[K(g,{rows:3,value:e.formState.remark,"onUpdate:value":a[5]||(a[5]=a=>e.formState.remark=a),placeholder:"请输入备注"},null,8,["value"])])),_:1})])),_:1}),K(r,{span:24},{default:V((()=>[K(m,null,{default:V((()=>[K(d,{type:"primary",class:"mr-3",onClick:e.handleSubmit},{default:V((()=>[G])),_:1},8,["onClick"]),K(d,{onClick:e.handleClose},{default:V((()=>[J])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules","label-col","wrapper-col"])):I("",!0)])),_:1},8,["title","visible","onClose"])])};export{A as default};
