var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,c=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;"undefined"!=typeof require&&require;import{g as s,l as r}from"./index.f1292d63.js";import{g as i,s as n,l as u,u as m,a as p,d as f,b}from"./dictFormat.b2531267.js";import{a as h,b as v}from"./index.2c6e8c15.js";import{u as y}from"./useDrawer.6ddc8ed7.js";import{_ as g}from"./index.440d206b.js";import{u as S}from"./useI18n.94ac6758.js";import{d as k,c as C,r as _,a as w,f as T,a6 as x,n as L,M as R,q as O,a3 as j,t as P,A as V,B as D,k as N,x as U,a4 as F,V as z,U as I,v as K,H as q}from"./ant-design-vue.5cd75ca8.js";const{t:A}=S(),B=[{title:A("routes.dict.dictLabel"),dataIndex:"dictLabel",key:"dictLabel",align:"center"},{title:A("routes.dict.dictValue"),dataIndex:"dictValue",key:"dictValue",align:"center"},{title:A("routes.dict.dictSort"),dataIndex:"dictSort",key:"dictSort",align:"center"},{title:A("routes.dict.status"),dataIndex:"status",key:"status",align:"center",slots:{customRender:"status"}},{title:A("routes.dict.remark"),dataIndex:"remark",key:"remark",align:"center"},{title:A("routes.dict.createdAt"),dataIndex:"createdAt",key:"createdAt",align:"center"},{title:A("routes.dict.action"),key:"action",align:"center",slots:{customRender:"action"}}];var E=k({components:{FormSearch:g},setup(){const e=C((()=>h().loading)),g=v(),S=_(),k=_([]),O=_([]),j={dictName:[{required:!0,message:A("routes.dict.dictNameCannotBeRmpty"),trigger:"blur"}],dictLabel:[{required:!0,message:A("routes.dict.dictTypeCannotBeRmpty"),trigger:"blur"}],status:[{required:!0,message:A("routes.dict.状态不能为空"),trigger:"change"}]},P=w([{type:"select",label:A("routes.dict.dictType"),name:"dictType",value:void 0,placeholder:A("routes.dict.dictTypePlaceholder"),normalizer:{value:"dictType",label:"dictName"},options:S},{type:"input",label:A("routes.dict.dictLabel"),name:"dictLabel",value:"",placeholder:A("routes.dict.dictLabelPlaceholder")},{type:"select",label:A("routes.dict.status"),name:"status",value:void 0,placeholder:A("routes.dict.statusPlaceholder"),normalizer:{value:"dictValue",label:"dictLabel"},options:O}]),V=w({pageNum:1,pageSize:10,dictLabel:"",dictType:"",status:""}),D=_([]),N=_({total:0,current:1,pageSize:10,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`}),U=w({selectedRowKeys:[]}),F=C((()=>U.selectedRowKeys.length>0)),z=e=>{u(e).then((e=>{D.value=e.data.rows,N.value.total=e.data.count,U.selectedRowKeys=[]}))},I=_(),K=w({id:void 0,dictType:"",dictLabel:"",dictValue:"",dictSort:1,status:"1",remark:""}),{open:q,drawerTitle:E}=y();return T((async()=>{O.value=await i("sys_normal_disable"),k.value=await i("sys_normal_disable"),k.value.forEach((e=>{e.label=e.dictLabel,e.value=e.dictValue})),s(g.params.id).then((e=>{V.dictType=e.data.dictType,P[0].value=e.data.dictType,z(V)})),r().then((e=>{S.value=e.data.rows}))})),M=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&c(e,a,t[a]);if(l)for(var a of l(t))d.call(t,a)&&c(e,a,t[a]);return e})({t:A,loading:e,queryParams:V,formFields:P,handleQuery:e=>{N.value.current=1,V.pageNum=N.value.current,V.dictType=e.dictType,V.dictLabel=e.dictLabel,V.status=e.status,z(V)},handleReset:e=>{P[0].value=void 0,L((()=>{V.dictLabel=e.dictLabel,V.status=e.status,P[0].value=V.dictType,z(V)}))},dataList:D,columns:B,pagination:N,handleTableChange:e=>{N.value=e,V.pageNum=N.value.current,V.pageSize=N.value.pageSize,z(V)},selectDictLabel:n,statusOptions:O},x(U)),t(M,a({hasSelected:F,onSelectChange:e=>{U.selectedRowKeys=e},typeOptions:S,open:q,drawerTitle:E,formState:K,labelCol:{span:6},wrapperCol:{span:18},rules:j,formRef:I,handleClose:()=>{K.id=void 0,I.value.resetFields(),q.value=!1},handleSubmit:()=>{I.value.validate().then((()=>{K.id?m(K).then((e=>{R.success(e.message),K.id=void 0,I.value.resetFields(),q.value=!1,z(V)})):p(K).then((e=>{R.success(e.message),K.id=void 0,I.value.resetFields(),q.value=!1,z(V)}))})).catch((e=>{}))},confirm:e=>{const t=e.id||U.selectedRowKeys;f(t).then((()=>{(t.length&&t.length===D.value.length||1===D.value.length)&&Math.ceil(N.value.total/V.pageSize)===V.pageNum&&V.pageNum>1&&V.pageNum--,z(V),R.success(A("common.deleteSuccess"))}))},cancel:e=>{R.success(A("common.cancelDelete"))},handleAdd:()=>{q.value=!0,E.value=A("common.add"),K.dictType=V.dictType},handleUpdate:e=>{b(e.id).then((e=>{q.value=!0,K.dictType=V.dictType,E.value=A("common.update"),L((()=>{Object.keys(K).forEach((t=>{K[t]=e.data[t]}))}))}))},disableOptions:k}));var M}});const M={class:"p-4"},Q={class:"mb-3"};E.render=function(e,t,a,l,o,d){const c=O("form-search"),s=O("a-button"),r=O("a-col"),i=O("a-popconfirm"),n=O("a-row"),u=O("a-table"),m=O("a-input"),p=O("a-form-item"),f=O("a-input-number"),b=O("a-radio-group"),h=O("a-textarea"),v=O("a-form"),y=O("a-drawer"),g=j("has-permi");return P(),V("div",M,[D("div",Q,[N(c,{formFields:e.formFields,onSearch:e.handleQuery,onReset:e.handleReset},null,8,["formFields","onSearch","onReset"])]),N(n,{gutter:10,class:"mb-2"},{default:U((()=>[F(N(r,null,{default:U((()=>[N(s,{color:"success",onClick:e.handleAdd},{default:U((()=>[z(I(e.t("common.add")),1)])),_:1},8,["onClick"])])),_:1},512),[[g,["system:dictData:add"]]]),F(N(r,null,{default:U((()=>[N(i,{title:e.t("common.confirmDelete"),"ok-text":e.t("common.okText"),"cancel-text":e.t("common.cancelText"),onConfirm:e.confirm,onCancel:e.cancel},{default:U((()=>[N(s,{disabled:!e.hasSelected,color:"error"},{default:U((()=>[z(I(e.t("common.delete")),1)])),_:1},8,["disabled"])])),_:1},8,["title","ok-text","cancel-text","onConfirm","onCancel"])])),_:1},512),[[g,["system:dictData:delete"]]])])),_:1}),N(u,{loading:e.loading,rowKey:"id","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"data-source":e.dataList,pagination:e.pagination,onChange:e.handleTableChange},{status:U((({record:t})=>[D("span",null,I(e.selectDictLabel(e.statusOptions,t.status)),1)])),action:U((({record:t})=>[D("span",null,[F(N(s,{type:"link",color:"success",class:"mr-3",onClick:a=>e.handleUpdate(t)},{default:U((()=>[z(I(e.t("common.update")),1)])),_:2},1032,["onClick"]),[[g,["system:dictData:update"]]]),N(i,{title:e.t("common.confirmDelete"),"ok-text":e.t("common.okText"),"cancel-text":e.t("common.cancelText"),onConfirm:a=>e.confirm(t),onCancel:e.cancel},{default:U((()=>[F(N(s,{type:"link",color:"error"},{default:U((()=>[z(I(e.t("common.delete")),1)])),_:1},512),[[g,["system:dictData:delete"]]])])),_:2},1032,["title","ok-text","cancel-text","onConfirm","onCancel"])])])),_:1},8,["loading","row-selection","columns","data-source","pagination","onChange"]),N(y,{width:"50%",title:e.drawerTitle,placement:"right",visible:e.open,"onUpdate:visible":t[6]||(t[6]=t=>e.open=t),maskClosable:!1,onClose:e.handleClose},{default:U((()=>[e.open?(P(),K(v,{key:0,ref:"formRef",model:e.formState,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:U((()=>[N(n,null,{default:U((()=>[N(r,{span:12},{default:U((()=>[N(p,{label:e.t("routes.dict.dictName"),name:"dictType"},{default:U((()=>[N(m,{disabled:"",value:e.formState.dictType,"onUpdate:value":t[0]||(t[0]=t=>e.formState.dictType=t),placeholder:e.t("routes.dict.dictTypePlaceholder")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1}),N(r,{span:12},{default:U((()=>[N(p,{label:e.t("routes.dict.dictLabel"),name:"dictLabel"},{default:U((()=>[N(m,{value:e.formState.dictLabel,"onUpdate:value":t[1]||(t[1]=t=>e.formState.dictLabel=t),placeholder:e.t("routes.dict.dictLabelPlaceholder")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1}),N(r,{span:12},{default:U((()=>[N(p,{label:e.t("routes.dict.dictValue"),name:"dictValue"},{default:U((()=>[N(m,{value:e.formState.dictValue,"onUpdate:value":t[2]||(t[2]=t=>e.formState.dictValue=t),placeholder:e.t("routes.dict.dictValuePlaceholder")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1}),N(r,{span:12},{default:U((()=>[N(p,{label:e.t("routes.dict.dictSort"),name:"dictSort"},{default:U((()=>[N(f,{class:"!w-[100%]",value:e.formState.dictSort,"onUpdate:value":t[3]||(t[3]=t=>e.formState.dictSort=t),placeholder:e.t("routes.dict.dictSortPlaceholder")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1}),N(r,{span:12},{default:U((()=>[N(p,{label:e.t("routes.dict.status"),name:"status"},{default:U((()=>[N(b,{value:e.formState.status,"onUpdate:value":t[4]||(t[4]=t=>e.formState.status=t),options:e.disableOptions},null,8,["value","options"])])),_:1},8,["label"])])),_:1}),N(r,{span:12},{default:U((()=>[N(p,{label:e.t("routes.dict.remark"),name:"remark"},{default:U((()=>[N(h,{rows:3,value:e.formState.remark,"onUpdate:value":t[5]||(t[5]=t=>e.formState.remark=t),placeholder:e.t("routes.dict.remarkPlaceholder")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1}),N(r,{span:24},{default:U((()=>[N(p,null,{default:U((()=>[N(s,{type:"primary",class:"mr-3",onClick:e.handleSubmit},{default:U((()=>[z(I(e.t("common.okText")),1)])),_:1},8,["onClick"]),N(s,{onClick:e.handleClose},{default:U((()=>[z(I(e.t("common.cancelText")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules","label-col","wrapper-col"])):q("",!0)])),_:1},8,["title","visible","onClose"])])};export{E as default};
